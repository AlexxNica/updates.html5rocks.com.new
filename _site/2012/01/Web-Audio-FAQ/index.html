<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta property="twitter:account_id" content="1593210261" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="A resource for developers looking to put HTML5 to use today, including information on specific features and when to use them in your apps.">
<meta name="keywords" content="html5,html 5,html5 demos,html5 examples,javascript,css3,notifications,geolocation,web workers,apppcache,file api,filereader,indexeddb,offline,audio,video,drag and drop,chrome,sse,mobile">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Web Audio FAQ</title>

<!-- Add to homescreen for Chrome on Android -->
<meta name="mobile-web-app-capable" content="yes">
<link rel="icon" sizes="192x192" href="  /assets/HTML5_Badge_192-f9389f6cad587f357d82be791970c8ad.png">

<!-- Add to homescreen for Safari on iOS -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="HTML5 Rocks">
<link rel="apple-touch-icon-precomposed" href="/assets/HTML5_Badge_192-f9389f6cad587f357d82be791970c8ad.png
">

<!-- Tile icon for Win8 (144x144 + tile color) -->
<meta name="msapplication-TileImage" content="/assets/HTML5_Badge_144-ddcf1cea1a1204b1733041733d66f76a.png
">
<meta name="msapplication-TileColor" content="#3372DF">

<!-- TODO: consider rel=canonical -->
<!-- TODO: consider rel=publisher -->
<link rel="alternate" type="application/rss+xml" title="HTML5 Rocks RSS" href="http://feeds.feedburner.com/html5rocks">
<link rel="publisher" href="https://plus.google.com/+GoogleChromeDevelopers">




  




<link href="//fonts.googleapis.com/css?family=Open+Sans:600,800|Source+Code+Pro" rel="stylesheet">
<link rel="stylesheet" href="/assets/main-8dae1b06ec239bb8b24c3d98cd1ad04b.css">

<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5-els.js"></script>
<![endif]-->

  </head>
  <body>
    <header class="main" id="siteheader">
  <a href="#sitenav" id="navtoggle"></a>
  <nav id="sitenav" class="container">
    <ul>
      <li id="tutorials_menu">
        <a href="http://www.html5rocks.com" class="tutorials">Home</a>
      </li>
      <li id="tutorials_menu">
        <a href="http://www.html5rocks.com/en/tutorials/?page=1" class="tutorials">Tutorials</a>
      </li>
      <li id="updates_menu">
        <a href="http://www.html5rocks.com/en/updates" class="updates">Updates</a>
      </li>
      <li id="contrib_menu">
        <a href="https://github.com/html5rocks/www.html5rocks.com/blob/master/CONTRIBUTING.md" target="_blank">Contribute</a>
      </li>
      <li id="slides_menu">
        <a href="http://www.html5rocks.com/en/slides" class="slides">Slides</a>
      </li>
      <li id="resources_menu">
        <a href="http://www.html5rocks.com/en/resources" class="resources">Resources</a>
      </li>
    </ul>
  </nav>
</header>

    <div class="body-content">
      <section class="banner">
        <section class="container">
          <a href="/en/" class="watermark"></a>
          <h1>Web Audio FAQ</h1>
          
        </section>
      </section>
      <article class="content-wrapper article">
<div class="container">
  <section class="byline clearfix">
    <section class="author-images">
      
        
<!-- TODO: change image address.-->

<img src="http://www.html5rocks.com/static/images/profiles/smus.png"
     alt="Boris Smus"
     title="Boris Smus"
     width="60" height="60"
     class="avatar">



      
    </section>
    <section class="meta">
      <div class="authors">
          
    
    <!-- TODO: change link. -->
    <strong>By</strong> <a href="http://www.html5rocks.com/profiles/#smus">
      Boris Smus
    </a> 
  

      </div>
      <div class="published">
        <time pubdate=""><strong>Published:</strong> January 10, 2012</time>
      </div>
      <div class="updated">
        <time><strong>Updated:</strong> January 10, 2012</time>
      </div>
      <div class="comments">
        <span><strong>Comments:</strong> <a href="#disqus_thread" class="load-comments" data-disqus-identifier="http://html5rocks.com/updates//2012/01/Web-Audio-FAQ"></a></span>
      </div>
      <div id="notcompatible" class="hidden">
        Your browser may not support the functionality in this article.
      </div>
    </section>
  </section>
  <section class="content">
    <p>Over the past few months, the WebKit <a href="https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html">Web Audio API</a> has emerged as a compelling platform for games and audio applications on the web. As developers familiarize themselves with it, I hear similar questions creep up repeatedly. This quick update is an attempt to address some of the more frequently asked questions to make your experience with the Web Audio API more pleasant.</p>

<h3 id="q-halp-i-cant-make-sounds">Q: Halp, I can’t make sounds!</h3>

<p>A: If you’re new to the Web Audio API, take a look at the <a href="http://www.html5rocks.com/en/tutorials/webaudio/intro/">getting started tutorial</a>, or Eric’s recipe for <a href="http://ericbidelman.tumblr.com/post/13471195250/web-audio-api-how-to-playing-audio-based-on-user">playing audio based on user interaction</a>.</p>

<h3 id="q-how-many-audio-contexts-should-i-have">Q. How many Audio Contexts should I have?</h3>

<p>A: Generally, you should include one <code>AudioContext</code> per page, and a single audio context can support many nodes connected to it. Though you may include multiple AudioContexts on a single page, this can lead to a performance hit.</p>

<h3 id="q-ive-got-an-audiobuffersourcenode-that-i-just-played-back-with-noteon-and-i-want-to-play-it-again-but-noteon-doesnt-do-anything-help">Q: I’ve got an AudioBufferSourceNode, that I just played back with <code>noteOn()</code>, and I want to play it again, but <code>noteOn()</code> doesn’t do anything! Help!</h3>

<p>A: Once a source node has finished playing back, it can’t play back more. To play back the underlying buffer again, you should create a new <code>AudioBufferSourceNode</code> and call <code>noteOn()</code>.</p>

<p>Though re-creating the source node may feel inefficient, source nodes are heavily optimized for this pattern. Plus, if you keep a handle to the AudioBuffer, you don’t need to make another request to the asset to play the same sound again. If you find yourself needing to repeat this pattern, encapsulate playback with a <a href="http://www.html5rocks.com/en/tutorials/webaudio/intro/#toc-play">simple helper function</a> like <code>playSound(buffer)</code>.</p>

<h3 id="q-when-playing-back-a-sound-why-do-you-need-to-make-a-new-source-node-every-time">Q: When playing back a sound, why do you need to make a new source node every time?</h3>

<p>A: The idea of this architecture is to decouple audio asset from playback state. Taking a record player analogy, buffers are analogous to records and sources to play-heads. Because many applications involve multiple versions of the same buffer playing simultaneously, this pattern is essential.</p>

<h3 id="q-how-can-i-process-sound-from-audio-and-video-tags">Q: How can I process sound from <code>audio</code> and <code>video</code> tags?</h3>

<p>A: <code>MediaElementAudioSourceNode</code> is in the works! When available, it will work roughly as follows (adding a filter effect to a sample playing via the audio tag):</p>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;audio</span> <span class="na">src=</span><span class="s">&quot;sounds/sample.wav&quot;</span> <span class="na">controls</span><span class="nt">&gt;</span></code></pre></div>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">audioElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;audio&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">mediaSourceNode</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createMediaElementSource</span><span class="p">(</span><span class="nx">audioElement</span><span class="p">);</span>
<span class="nx">mediaSourceNode</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">filter</span><span class="p">);</span>
<span class="nx">filter</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">destination</span><span class="p">);</span></code></pre></div>

<p>This feature is tracked in <a href="http://code.google.com/p/chromium/issues/detail?id=79949">this crbug</a>. Note that in this setup, there is no need to call <code>mediaSourceNode.noteOn()</code>, the audio tag controls playback.</p>

<h3 id="q-when-can-i-get-sound-from-a-microphone">Q: When can I get sound from a Microphone?</h3>

<p>A: The audio input part of this will be implemented <a href="http://dev.w3.org/2011/webrtc/editor/getusermedia.html">as part of WebRTC</a> using <code>getUserMedia</code>, and be available as a special source node in the Web Audio API. It will work in conjunction with <code>createMediaElementSource</code>.</p>

<h3 id="q-how-can-i-check-when-an-audiosourcenode-has-finished-playing">Q: How can I check when an <code>AudioSourceNode</code> has finished playing?</h3>

<p>A: Currently you have to use a JavaScript timer since Web Audio API does not support this functionality. The following snippet from the <a href="http://www.html5rocks.com/en/tutorials/webaudio/intro/">Getting Started with Web Audio API tutorial</a> is an example of this in action:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Assume source and buffer are previously defined.</span>
<span class="nx">source</span><span class="p">.</span><span class="nx">noteOn</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;playback finished&#39;</span><span class="p">);</span>
<span class="p">},</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">duration</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">);</span></code></pre></div>

<p>There is an <a href="https://bugs.webkit.org/show_bug.cgi?id=71942">open bug</a> to make Web Audio API implement a more accurate callback.</p>

<h3 id="q-loading-sounds-causes-the-whole-ui-thread-to-lock-up-and-my-ui-becomes-unresponsive-help">Q: Loading sounds causes the whole UI thread to lock up and my UI becomes unresponsive. Help!**</h3>

<p>A: Use the <code>decodeAudioData</code> API for asynchronous loading to avoid blocking the main thread. See <a href="http://www.html5rocks.com/en/tutorials/webaudio/intro/js/buffer-loader.js">this example</a>.</p>

<h3 id="q-can-the-web-audio-api-be-used-to-process-sounds-faster-than-realtime">Q: Can the Web Audio API be used to process sounds faster than realtime?</h3>

<p>A: Yes, a solution is being worked on. Please stay tuned!</p>

<h3 id="q-ive-made-an-awesome-web-audio-api-application-but-whenever-the-tab-its-running-in-goes-in-the-background-sounds-go-all-weird">Q: I’ve made an awesome Web Audio API application, but whenever the tab it’s running in goes in the background, sounds go all weird!</h3>

<p>A: This is probably because you are using <code>setTimeouts</code>, which behave differently if the page is backgrounded. In the future the Web Audio API will be able to callback at specific times using the web audio’s internal timer (<code>context.currentTime</code> attribute). For more information, please see <a href="https://bugs.webkit.org/show_bug.cgi?id=70061">this feature request</a>.</p>

<p>In general, it may be a good idea to stop playback when your app goes into the background. You can detect when a page goes to the background using the <a href="http://code.google.com/chrome/whitepapers/pagevisibility.html">Page Visibility API</a>.</p>

<h3 id="q-how-can-i-change-the-pitch-of-a-sound-using-the-web-audio-api">Q: How can I change the pitch of a sound using the Web Audio API?</h3>

<p>A: Change the <code>playbackRate</code> on the source node.</p>

<h3 id="q-can-i-change-pitch-without-changing-speed">Q: Can I change pitch without changing speed?</h3>

<p>A: The Web Audio API could have a PitchNode in the audio context, but this is hard to implement. This is because there is no straightforward pitch shifting algorithm in audio community. Known techniques create artifacts, especially in cases where the pitch shift is large. There are two kinds of approaches to tackle this problem:</p>

<ul>
  <li>Time domain algorithms, which cause repeated segment echoes artifacts.</li>
  <li>Frequency domain techniques, which cause reverberant sound artifacts.</li>
</ul>

<p>Though there is no native node for doing these techniques, you can do it in with a <code>JavaScriptAudioNode</code>. This <a href="https://github.com/janesconference/Voron/blob/master/voron.js">code snippet</a> might serve as a starting point.</p>

<h3 id="q-how-can-i-create-an-audiocontext-at-a-sample-rate-of-my-choosing">Q: How can I create an AudioContext at a sample rate of my choosing?</h3>

<p>A: Currently there is no support for this, but we’re looking into it. See <a href="http://crbug.com/73062">this feature request</a>.</p>

<p>If you have additional questions, feel free to ask them on StackOverflow using the <a href="http://stackoverflow.com/questions/tagged/web-audio?sort=newest&amp;pagesize=50">web-audio</a> tag.</p>

  </section>
  <section>
    <!-- TODO: Update link. -->
    
      <a href="/tag/webaudio" class="tag">webaudio</a>
    
      <a href="/tag/faq" class="tag">faq</a>
    
      <a href="/tag/multimedia" class="tag">multimedia</a>
    
  </section>
  <div class="pager">
    
    <a href="/2012/01/Introducing-Video-Player-Sample">&laquo; Introducing Video Player Sample</a>
     | 
    <a href="/2012/01/Getting-Rid-of-Synchronous-XHRs">Getting Rid of Synchronous XHRs &raquo;</a>
    
  </div>
</div>
</article>
<section class="disqus pattern-bg-lighter">
  <div id="disqus" class="container">
    <h2>Comments</h2>
    <div id="disqus_thread">
      <a href="#disqus_thread" class="load-comments"
          data-disqus-identifier="/2012/01/Web-Audio-FAQ">0</a>
    </div>
  </div>

  <noscript>
    <p class="center">
      <strong>
        <a href="http://disqus.com/?ref_noscript">Please enable JavaScript to view the comments powered by Disqus.</a>
      </strong>
    </p>
  </noscript>

  <script>

    var disqus_shortname = 'html5rocks';
    var disqus_identifier = 'http://html5rocks.com/updates//2012/01/Web-Audio-FAQ';
    var disqus_url = 'http://html5rocks.com/updates//2012/01/Web-Audio-FAQ';
    var disqus_developer = 0;

    var disqus_config = function () {
      var funky_language_code_mapping = {
        'de': 'de_inf',
        'es': 'es_ES',
        'pt': 'pt_EU',
        'sr': 'sr_CYRL',
        'sv': 'sv_SE',
        'zh': 'zh_HANT'
      };
      this.language = funky_language_code_mapping['en'] ||
                      'en';

      this.callbacks.onReady = [ function () {
                                    try {
                                      ga('send', 'event', 'View comments');
                                    } catch(err){}
                                 } ];
      this.callbacks.onNewComment = [ function (comment) {
                                        try {
                                          ga('send', 'event', 'Commented');
                                        } catch(err){}
                                      } ];
    };

    window.addEventListener('load', function(e) {

      var c = document.createElement('script');
      c.type = 'text/javascript';
      c.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      c.async = true;

      var s = document.getElementsByTagName('script')[0], sp = s.parentNode;
      sp.insertBefore(c, s);

      if (window.location.hash === '#disqus_thread')
        loadComments();

    }, false);

    var disqus_loaded = false;
    function loadComments() {

      if (disqus_loaded)
        return;

      disqus_loaded = true;

      ga('send', 'event', 'Interactions', 'Comments', 'Comments Loaded');

      var s = document.getElementsByTagName('script')[0], sp = s.parentNode;
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;

      var disqusContainer = document.getElementById('disqus');
      disqusContainer.classList.add('active');

      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      sp.insertBefore(dsq, s);
    }
    var loadCommentsButtons = document.querySelectorAll('.load-comments');
    for(var l = 0; l < loadCommentsButtons.length; l++)
      loadCommentsButtons[l].addEventListener('click', loadComments);

  </script>
</section>



    </div>
    <footer>
  <div class="container">
    
    <h1>Next steps</h1>
    <aside class="panel share">
      <h2>Share</h2>
        <a href="https://twitter.com/share?url=http://www.html5rocks.com/tutorials/shapes/getting-started/&amp;text=Getting Started with CSS Shapes&amp;lang=en&amp;via=ChromiumDev&amp;related=ChromiumDev" class="twitter" target="_blank">Twitter</a>
        <a href="https://www.facebook.com/sharer/sharer.php?u=http://www.html5rocks.com/tutorials/shapes/getting-started/" class="facebook" target="_blank">Facebook</a>
        <a href="https://plus.google.com/share?url=http://www.html5rocks.com/tutorials/shapes/getting-started/" class="gplus" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">Google+</a>
    </aside>
    <aside class="panel rss">
      <h2>Subscribe</h2>
      <p>Enjoyed this article? Grab the <a href="http://feeds.feedburner.com/html5rocks">RSS feed</a> and stay up-to-date.</p>
    </aside>
    
    <p class="licensing">
      Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>, the content of this page is licensed under the <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License</a>, and code samples are licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>.
    </p>
  </div>
</footer>


    <script>
      (function() {

        var siteHeader = document.getElementById('siteheader');
        var navToggle = document.getElementById('navtoggle');
        var siteNav = document.getElementById('sitenav');

        navToggle.addEventListener('click', function(e) {
          siteNav.classList.toggle('active');
          e.preventDefault();
        });

      })();
    </script>

    <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create','UA-15028909-7','auto');
      ga('create','UA-49880327-4','auto',{'name':'html5rocks'});
      ga('send','pageview');
      ga('html5rocks.send','pageview');
    </script>
  </body>
</html>
