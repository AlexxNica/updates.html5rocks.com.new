<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta property="twitter:account_id" content="1593210261" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="A resource for developers looking to put HTML5 to use today, including information on specific features and when to use them in your apps.">
<meta name="keywords" content="html5,html 5,html5 demos,html5 examples,javascript,css3,notifications,geolocation,web workers,apppcache,file api,filereader,indexeddb,offline,audio,video,drag and drop,chrome,sse,mobile">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="google-site-verification" content="E1HOIDkksrWY5npenL8FeQhKn4Ujctd75iO2lfufSyA" />
<title>A More Compatible, Smoother Touch</title>

<!-- Add to homescreen for Chrome on Android -->
<meta name="mobile-web-app-capable" content="yes">
<link rel="icon" sizes="192x192" href="  /assets/HTML5_Badge_192-f9389f6cad587f357d82be791970c8ad.png">
<meta name="theme-color" content="#3372DF">

<!-- Add to homescreen for Safari on iOS -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="HTML5 Rocks">
<link rel="apple-touch-icon-precomposed" href="/assets/HTML5_Badge_192-f9389f6cad587f357d82be791970c8ad.png
">

<!-- Tile icon for Win8 (144x144 + tile color) -->
<meta name="msapplication-TileImage" content="/assets/HTML5_Badge_144-ddcf1cea1a1204b1733041733d66f76a.png
">
<meta name="msapplication-TileColor" content="#3372DF">

<!-- TODO: consider rel=canonical -->
<link rel="alternate" type="application/rss+xml" title="HTML5 Rocks RSS" href="http://feeds.feedburner.com/html5rocks">
<link rel="publisher" href="https://plus.google.com/+GoogleChromeDevelopers">

  
    
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@ChromiumDev">
<meta name="twitter:creator" content="@viviancromwell">

<meta property="og:type" content="article">
<meta property="og:title" content="A More Compatible, Smoother Touch - HTML5 Rocks">
<meta property="og:url" content="/2014/05/A-More-Compatible-Smoother-Touch">
<meta property="og:description" content="You and your users want mobile web apps that react and scroll smoothly to the touch. Developing them should be easy but, unfortunately, how mobile web browsers react to touch events during scrolling is left as an implementation detail in the [TouchEvent](http://www.w3.org/TR/touch-events/) specification. ">
<meta property="og:image" content="http://www.html5rocks.com/static/images/profiles/viviancromwell.png">
<meta property="og:site_name" content="HTML5 Rocks - A resource for open web HTML5 developers">

<link rel="author" href="https://www.google.com/profiles/109147099159025717832">
  

<link href="//fonts.googleapis.com/css?family=Open+Sans:600,800|Source+Code+Pro" rel="stylesheet">
<link rel="stylesheet" href="/assets/main-8dae1b06ec239bb8b24c3d98cd1ad04b.css">

<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5-els.js"></script>
<![endif]-->

  </head>
  <body>
    <header class="main" id="siteheader">
  <a href="#sitenav" id="navtoggle"></a>
  <nav id="sitenav" class="container">
    <ul>
      <li id="tutorials_menu">
        <a href="http://www.html5rocks.com" class="tutorials">Home</a>
      </li>
      <li id="tutorials_menu">
        <a href="http://www.html5rocks.com/en/tutorials/?page=1" class="tutorials">Tutorials</a>
      </li>
      <li id="updates_menu">
        <a href="http://www.html5rocks.com/en/updates" class="updates">Updates</a>
      </li>
      <li id="contrib_menu">
        <a href="https://github.com/html5rocks/www.html5rocks.com/blob/master/CONTRIBUTING.md" target="_blank">Contribute</a>
      </li>
      <li id="slides_menu">
        <a href="http://www.html5rocks.com/en/slides" class="slides">Slides</a>
      </li>
      <li id="resources_menu">
        <a href="http://www.html5rocks.com/en/resources" class="resources">Resources</a>
      </li>
    </ul>
  </nav>
</header>

    <div class="body-content">
      <section class="banner">
        <section class="container">
          <a href="/" class="watermark"></a>
          <h1>A More Compatible, Smoother Touch</h1>
          
        </section>
      </section>
      <article class="content-wrapper article">
<div class="container">
  <section class="byline clearfix">
    <section class="author-images">
      
        
<!-- TODO: change image address.-->

<img src="http://www.html5rocks.com/static/images/profiles/viviancromwell.png"
     alt="Vivian Cromwell"
     title="Vivian Cromwell"
     width="60" height="60"
     class="avatar">



      
    </section>
    <section class="meta">
      <div class="authors">
          
    
    <!-- TODO: change link. -->
    <strong>By</strong> <a href="http://www.html5rocks.com/profiles/#viviancromwell">
      Vivian Cromwell
    </a> 
  

      </div>
      <div class="published">
        <time pubdate=""><strong>Published:</strong> May 21, 2014</time>
      </div>
      <div class="updated">
        <time><strong>Updated:</strong> May 21, 2014</time>
      </div>
      <div class="comments">
        <span><strong>Comments:</strong> <a href="#disqus_thread" class="load-comments" data-disqus-identifier="http://updates.html5rocks.com/2014/05/A-More-Compatible-Smoother-Touch">0</a></span>
      </div>
      <div id="notcompatible" class="hidden">
        Your browser may not support the functionality in this article.
      </div>
    </section>
  </section>
  <section class="content">
    <p>You and your users want mobile web apps that react and scroll smoothly to the 
touch. Developing them <a href="https://developers.google.com/web/fundamentals/documentation/user-input/touch-input/">should be easy</a> but, unfortunately, how mobile web 
browsers react to touch events during scrolling is left as an implementation 
detail in the <a href="http://www.w3.org/TR/touch-events/">TouchEvent</a> specification. As 
a result, approaches can be broken down roughly into 4 categories. This 
situation exposes a fundamental tension between delivering scroll smoothness and 
maintaining developer control. </p>

<h2 id="four-different-models-of-touch-event-processing">Four different models of touch event processing?</h2>

<p>The behavior differences between the browsers break down into four models.</p>

<ol>
  <li>
    <p><strong>Normal synchronous event processing</strong></p>

    <p>Touchmove events are sent during scrolling and each scroll update blocks until touchmove handling has completed. This is good as the simplest to understand and the most powerful but bad for scroll performance because it means that each frame during the scroll must block on the main thread.</p>

    <blockquote>
      <p>Browsers: Android Browser (Android 4.0.4, 4.3), Mobile Safari (when 
   scrolling div)</p>
    </blockquote>
  </li>
  <li>
    <p><strong>Asynchronous touchmove processing</strong></p>

    <p>Touchmove events are sent during scrolling, but scrolling can proceed asynchronously (the touchmove event is ignored after scrolling has begun). This can result in “double handling” of events, for example, continuing to  scroll after the web site does something with the touchmove and calls <a href="https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault">preventDefault</a> on the event, telling the browser not to handle it.</p>

    <blockquote>
      <p>Browsers: Mobile Safari (when scrolling Document), Firefox</p>
    </blockquote>
  </li>
  <li>
    <p><strong>Touchmove suppressed while scrolling</strong></p>

    <p>Touchmove events are not sent after scrolling starts and do not resume until after the touchend event. In this model, it’s hard to tell the difference between a stationary touch and a scroll.</p>

    <blockquote>
      <p>Browsers: Samsung Browser (mousemove events sent)</p>
    </blockquote>
  </li>
  <li>
    <p><strong>Touchcancel on scroll start</strong></p>

    <p>You can’t have it both ways – scroll smoothness and developer control – and this model makes clear the trade-off between smooth scrolling and event handling, similar to the semantics of the <a href="http://www.w3.org/TR/pointerevents/">Pointer Events</a> specification. Some experiences that may need to track the finger, like pull-to-refresh, are not possible.</p>

    <blockquote>
      <p>Browsers: Chrome Desktop M32+, Chrome Android</p>
    </blockquote>
  </li>
</ol>

<h2 id="why-change">Why Change?</h2>

<p>Chrome for Android currently uses Chrome’s Old Model: touchcancel on scroll 
start, which enhances scrolling performance, but leads to developer confusion. 
In particular, some developers aren’t aware of the touchcancel event or how to 
deal with it, and this has caused some web sites to break. More importantly, an 
entire class of UI scrolling effects and behaviors, such as <strong>pull-to-refresh</strong>, 
<strong>hidey bars</strong>, and <strong>snap points</strong> are difficult or impossible to implement 
well.</p>

<p>Rather than adding specifically hardcoded features to support these effects, 
Chrome aims to concentrate on adding platform primitives that allow developers 
to implement these effects directly. See <a href="https://groups.google.com/a/chromium.org/forum/#!topic/blink-dev/4jBAnIVwrt0">A Rational Web 
Platform</a> 
for a general exposition of this philosophy.</p>

<h2 id="chromes-new-model-the-throttled-async-touchmove-model">Chrome’s New Model: The Throttled Async Touchmove Model</h2>

<p>Chrome is introducing <a href="https://groups.google.com/a/chromium.org/forum/#!topic/blink-dev/wHnyukcYBcA">a new 
behavior</a> 
designed to improve compatibility with code written for other browsers when 
scrolling, as well as enabling other scenarios that depend on getting touchmove 
events while scrolling. This feature is enabled by default and you can turn it 
off with the following flag,  <strong>chrome://flags#touch-scrolling-mode</strong>.</p>

<p>The new behavior is:</p>

<ul>
  <li>The <strong>first</strong> touchmove is sent <strong>synchronously</strong> to allow scroll to be 
<strong>canceled</strong></li>
  <li>During active scrolling
    <ul>
      <li>touchmove events are sent <strong>asynchronously</strong></li>
      <li><strong>throttled</strong> to 1 event per <strong>200ms</strong>, or if a CSS <strong>15px</strong> slop region 
is exceeded</li>
      <li><strong>Event.cancelable</strong> is <strong>false</strong></li>
    </ul>
  </li>
  <li>Otherwise, touchmove events fire synchronously as normal when active scrolling 
terminates or isn’t possible because the scroll limit has been hit</li>
  <li>A touchend event <strong>always</strong> occurs when the user lifts their finger</li>
</ul>

<p>You can try this <a href="http://www.rbyers.net/touchevent-scroll.html">demo</a> in Chrome for Android and toggle the 
chrome://flags#touch-scrolling-mode flag to see the difference.</p>

<h2 id="let-us-know-what-you-think">Let us know what you think</h2>

<p>The Async Touchmove Model has the potential to improve cross-browser 
compatibility and enable a new class of touch gesture effects. We’re interested 
in hearing what developers think, and in seeing the creative things you can do 
with it. </p>

  </section>
  <section>
    <!-- TODO: Update link. -->
    
      <a href="/tag/mobile" class="tag">mobile</a>
    
      <a href="/tag/Touch" class="tag">Touch</a>
    
      <a href="/tag/TouchEvent" class="tag">TouchEvent</a>
    
  </section>
  <div class="pager">
    
    <a href="/2014/03/Get-on-the-CSS-Grid">&laquo; Get on the CSS Grid!</a>
     | 
    <a href="/2014/05/Web-Animations---element-animate-is-now-in-Chrome-36">Web Animations - element.animate() is now in Chrome 36 &raquo;</a>
    
  </div>
</div>
</article>
<section class="disqus pattern-bg-lighter">
  <div id="disqus" class="container">
    <h2>Comments</h2>
    <div id="disqus_thread">
      <a href="#disqus_thread" class="load-comments"
          data-disqus-identifier="http://updates.html5rocks.com/2014/05/A-More-Compatible-Smoother-Touch">0</a>
    </div>
  </div>

  <noscript>
    <p class="center">
      <strong>
        <a href="http://disqus.com/?ref_noscript">Please enable JavaScript to view the comments powered by Disqus.</a>
      </strong>
    </p>
  </noscript>

  <script>

    var disqus_shortname = 'html5rocks';
    var disqus_identifier = 'http://updates.html5rocks.com/2014/05/A-More-Compatible-Smoother-Touch';
    var disqus_url = 'http://updates.html5rocks.com/2014/05/A-More-Compatible-Smoother-Touch';
    var disqus_developer = 0;

    var disqus_config = function () {
      var funky_language_code_mapping = {
        'de': 'de_inf',
        'es': 'es_ES',
        'pt': 'pt_EU',
        'sr': 'sr_CYRL',
        'sv': 'sv_SE',
        'zh': 'zh_HANT'
      };
      this.language = funky_language_code_mapping['en'] ||
                      'en';

      this.callbacks.onReady = [ function () {
                                    try {
                                      ga('send', 'event', 'View comments');
                                    } catch(err){}
                                 } ];
      this.callbacks.onNewComment = [ function (comment) {
                                        try {
                                          ga('send', 'event', 'Commented');
                                        } catch(err){}
                                      } ];
    };

    window.addEventListener('load', function(e) {

      var c = document.createElement('script');
      c.type = 'text/javascript';
      c.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      c.async = true;

      var s = document.getElementsByTagName('script')[0], sp = s.parentNode;
      sp.insertBefore(c, s);

      if (window.location.hash === '#disqus_thread')
        loadComments();

    }, false);

    var disqus_loaded = false;
    function loadComments() {

      if (disqus_loaded)
        return;

      disqus_loaded = true;

      ga('send', 'event', 'Interactions', 'Comments', 'Comments Loaded');

      var s = document.getElementsByTagName('script')[0], sp = s.parentNode;
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;

      var disqusContainer = document.getElementById('disqus');
      disqusContainer.classList.add('active');

      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      sp.insertBefore(dsq, s);
    }
    var loadCommentsButtons = document.querySelectorAll('.load-comments');
    for(var l = 0; l < loadCommentsButtons.length; l++)
      loadCommentsButtons[l].addEventListener('click', loadComments);

  </script>
</section>



    </div>
    <footer>
  <div class="container">
    
    <h1>Next steps</h1>
    <aside class="panel share">
      <h2>Share</h2>
        <a href="https://twitter.com/share?url=http://www.html5rocks.com/tutorials/shapes/getting-started/&amp;text=Getting Started with CSS Shapes&amp;lang=en&amp;via=ChromiumDev&amp;related=ChromiumDev" class="twitter" target="_blank">Twitter</a>
        <a href="https://www.facebook.com/sharer/sharer.php?u=http://www.html5rocks.com/tutorials/shapes/getting-started/" class="facebook" target="_blank">Facebook</a>
        <a href="https://plus.google.com/share?url=http://www.html5rocks.com/tutorials/shapes/getting-started/" class="gplus" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">Google+</a>
    </aside>
    <aside class="panel rss">
      <h2>Subscribe</h2>
      <p>Enjoyed this article? Grab the <a href="/rss">RSS feed</a> and stay up-to-date.</p>
    </aside>
    
    <p class="licensing">
      Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>, the content of this page is licensed under the <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License</a>, and code samples are licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>.
    </p>
  </div>
</footer>


    <script>
      (function() {

        var siteHeader = document.getElementById('siteheader');
        var navToggle = document.getElementById('navtoggle');
        var siteNav = document.getElementById('sitenav');

        navToggle.addEventListener('click', function(e) {
          siteNav.classList.toggle('active');
          e.preventDefault();
        });

      })();
    </script>

    <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create','UA-15028909-7','auto');
      ga('create','UA-49880327-4','auto',{'name':'html5rocks'});
      ga('send','pageview');
      ga('html5rocks.send','pageview');
    </script>
  </body>
</html>
