<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta property="twitter:account_id" content="1593210261" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="A resource for developers looking to put HTML5 to use today, including information on specific features and when to use them in your apps.">
<meta name="keywords" content="html5,html 5,html5 demos,html5 examples,javascript,css3,notifications,geolocation,web workers,apppcache,file api,filereader,indexeddb,offline,audio,video,drag and drop,chrome,sse,mobile">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="google-site-verification" content="E1HOIDkksrWY5npenL8FeQhKn4Ujctd75iO2lfufSyA" />
<title>Web Animations - element.animate() is now in Chrome 36</title>

<!-- Add to homescreen for Chrome on Android -->
<meta name="mobile-web-app-capable" content="yes">
<link rel="icon" sizes="192x192" href="  /assets/HTML5_Badge_192-f9389f6cad587f357d82be791970c8ad.png">
<meta name="theme-color" content="#3372DF">

<!-- Add to homescreen for Safari on iOS -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="HTML5 Rocks">
<link rel="apple-touch-icon-precomposed" href="/assets/HTML5_Badge_192-f9389f6cad587f357d82be791970c8ad.png
">

<!-- Tile icon for Win8 (144x144 + tile color) -->
<meta name="msapplication-TileImage" content="/assets/HTML5_Badge_144-ddcf1cea1a1204b1733041733d66f76a.png
">
<meta name="msapplication-TileColor" content="#3372DF">

<!-- TODO: consider rel=canonical -->
<!-- TODO: consider rel=publisher -->
<link rel="alternate" type="application/rss+xml" title="HTML5 Rocks RSS" href="http://feeds.feedburner.com/html5rocks">
<link rel="publisher" href="https://plus.google.com/+GoogleChromeDevelopers">




  




<link href="//fonts.googleapis.com/css?family=Open+Sans:600,800|Source+Code+Pro" rel="stylesheet">
<link rel="stylesheet" href="/assets/main-8dae1b06ec239bb8b24c3d98cd1ad04b.css">

<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5-els.js"></script>
<![endif]-->

  </head>
  <body>
    <header class="main" id="siteheader">
  <a href="#sitenav" id="navtoggle"></a>
  <nav id="sitenav" class="container">
    <ul>
      <li id="tutorials_menu">
        <a href="http://www.html5rocks.com" class="tutorials">Home</a>
      </li>
      <li id="tutorials_menu">
        <a href="http://www.html5rocks.com/en/tutorials/?page=1" class="tutorials">Tutorials</a>
      </li>
      <li id="updates_menu">
        <a href="http://www.html5rocks.com/en/updates" class="updates">Updates</a>
      </li>
      <li id="contrib_menu">
        <a href="https://github.com/html5rocks/www.html5rocks.com/blob/master/CONTRIBUTING.md" target="_blank">Contribute</a>
      </li>
      <li id="slides_menu">
        <a href="http://www.html5rocks.com/en/slides" class="slides">Slides</a>
      </li>
      <li id="resources_menu">
        <a href="http://www.html5rocks.com/en/resources" class="resources">Resources</a>
      </li>
    </ul>
  </nav>
</header>

    <div class="body-content">
      <section class="banner">
        <section class="container">
          <a href="/" class="watermark"></a>
          <h1>Web Animations - element.animate() is now in Chrome 36</h1>
          
        </section>
      </section>
      <article class="content-wrapper article">
<div class="container">
  <section class="byline clearfix">
    <section class="author-images">
      
        
<!-- TODO: change image address.-->

<img src="http://www.html5rocks.com/static/images/profiles/brendankenny.png"
     alt="Brendan Kenny"
     title="Brendan Kenny"
     width="60" height="60"
     class="avatar">



      
    </section>
    <section class="meta">
      <div class="authors">
          
    
    <!-- TODO: change link. -->
    <strong>By</strong> <a href="http://www.html5rocks.com/profiles/#brendankenny">
      Brendan Kenny
    </a> 
  

      </div>
      <div class="published">
        <time pubdate=""><strong>Published:</strong> May 22, 2014</time>
      </div>
      <div class="updated">
        <time><strong>Updated:</strong> October 07, 2014</time>
      </div>
      <div class="comments">
        <span><strong>Comments:</strong> <a href="#disqus_thread" class="load-comments" data-disqus-identifier="http://updates.html5rocks.com/2014/05/Web-Animations---element-animate-is-now-in-Chrome-36">0</a></span>
      </div>
      <div id="notcompatible" class="hidden">
        Your browser may not support the functionality in this article.
      </div>
    </section>
  </section>
  <section class="content">
    <p>Animation on the web was once the province of JavaScript, but as the world moved to mobile, animations moved to CSS for the declarative syntax and the optimizations browsers were able to make with it. With 60fps on mobile always your goal, it makes sense to never step outside of what browsers know how to efficiently display.</p>

<p>More tools are appearing to make JavaScript-driven animations more efficient, but the holy grail is a unification of <a href="http://www.html5rocks.com/en/tutorials/speed/high-performance-animations/#toc-imperative-declarative">declarative and imperative animations</a> , where the decision of how to write your animations is based on what’s the clearest code, not what is possible in one form and not in the other.</p>

<p><a href="http://dev.w3.org/fxtf/web-animations/">Web Animations</a> stand to answer that call, and the first part of it has landed in Chrome 36 in the form of <code>element.animate()</code>. This new function lets you create an animation purely in JavaScript and have it run as efficiently as any CSS Animation or Transition (in fact, as of Chrome 34, <a href="http://updates.html5rocks.com/2013/12/New-Web-Animations-engine-in-Blink-drives-CSS-Animations-Transitions">the exact same Web Animations engine drives all of these methods</a>).</p>

<p>The syntax is simple, and its parts should be familiar to you if you’ve ever written a CSS Transition or Animation:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">element</span><span class="p">.</span><span class="nx">animate</span><span class="p">([</span>
  <span class="p">{</span><span class="nx">cssProperty</span><span class="o">:</span> <span class="nx">value0</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">cssProperty</span><span class="o">:</span> <span class="nx">value1</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">cssProperty</span><span class="o">:</span> <span class="nx">value2</span><span class="p">},</span>
  <span class="c1">//...</span>
<span class="p">],</span> <span class="p">{</span>
    <span class="nx">duration</span><span class="o">:</span> <span class="nx">timeInMs</span><span class="p">,</span>
    <span class="nx">iterations</span><span class="o">:</span> <span class="nx">iterationCount</span><span class="p">,</span>
    <span class="nx">delay</span><span class="o">:</span> <span class="nx">delayValue</span>
<span class="p">});</span></code></pre></div>

<p>The biggest advantage of this new function is the elimination of a lot of awkward hoops we formerly had to jump through to get a smooth, jank-free animation.</p>

<p>As an example, for <a href="http://www.google.co.uk/santatracker/">Santa Tracker</a> last year, we wanted to have snow falling continuously, and we decided to animate it via CSS so that it could be <a href="http://www.html5rocks.com/en/tutorials/speed/high-performance-animations/">done so efficiently</a>.</p>

<p>However, we wanted to pick the snow’s horizontal position dynamically based on screen and events going on in the scene itself, and of course the height of the snow’s fall (the height of the user’s browser window) wouldn’t be known until we were actually running. This meant we really had to use CSS Transitions, as authoring a CSS Animation at runtime gets complex quickly (and hundreds of snowflakes means hundreds of new styling rules).</p>

<p>So we took the following approach, which should be familiar:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">snowFlake</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="s1">&#39;translate(&#39;</span> <span class="o">+</span> <span class="nx">snowLeft</span> <span class="o">+</span> <span class="s1">&#39;px, -100%)&#39;</span><span class="p">;</span>
<span class="c1">// wait a frame</span>
<span class="nx">snowFlake</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">;</span>
<span class="nx">snowFlake</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">transitionProperty</span> <span class="o">=</span> <span class="s1">&#39;transform&#39;</span><span class="p">;</span>
<span class="nx">snowFlake</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">transitionDuration</span> <span class="o">=</span> <span class="s1">&#39;1500ms&#39;</span><span class="p">;</span>
<span class="nx">snowFlake</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="s1">&#39;translate(&#39;</span> <span class="o">+</span> <span class="nx">snowLeft</span> <span class="o">+</span> <span class="s1">&#39;px, &#39;</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span> <span class="o">+</span> <span class="s1">&#39;px)&#39;</span><span class="p">;</span></code></pre></div>

<p>The key is in that ‘wait a frame’ comment. In order to successfully start a transition, the browser has to acknowledge that the element is in the starting position. There are a few ways to do this. One of the most common ways is to read from one of the element properties that forces the browser to compute layout, thereby ensuring it knows that the element has a starting position before transitioning to the ending position. Using this method allows you to congratulate yourself on your superior knowledge of browser internals while still feeling dirty with every keystroke.</p>

<p>In contrast, the equivalent <code>element.animate()</code> call couldn’t be more clear, saying exactly what is intended:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">snowFlake</span><span class="p">.</span><span class="nx">animate</span><span class="p">([</span>
  <span class="p">{</span><span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translate(&#39;</span> <span class="o">+</span> <span class="nx">snowLeft</span> <span class="o">+</span> <span class="s1">&#39;px, -100%)&#39;</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translate(&#39;</span> <span class="o">+</span> <span class="nx">snowLeft</span> <span class="o">+</span> <span class="s1">&#39;px, &#39;</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span> <span class="o">+</span> <span class="s1">&#39;px)&#39;</span><span class="p">}</span>
<span class="p">],</span> <span class="mi">1500</span><span class="p">);</span></code></pre></div>

<p>There are many more options. Just like with its CSS counterparts, Web Animations can be delayed and iterated:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">snowFlake</span><span class="p">.</span><span class="nx">animate</span><span class="p">([</span>
  <span class="p">{</span><span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translate(&#39;</span> <span class="o">+</span> <span class="nx">snowLeft</span> <span class="o">+</span> <span class="s1">&#39;px, -100%)&#39;</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translate(&#39;</span> <span class="o">+</span> <span class="nx">snowLeft</span> <span class="o">+</span> <span class="s1">&#39;px, &#39;</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span> <span class="o">+</span> <span class="s1">&#39;px)&#39;</span><span class="p">}</span>
<span class="p">],</span> <span class="p">{</span>
  <span class="nx">duration</span><span class="o">:</span> <span class="mi">1500</span><span class="p">,</span>
  <span class="nx">iterations</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nx">delay</span><span class="o">:</span> <span class="mi">300</span>
<span class="p">});</span></code></pre></div>

<h2>AnimationPlayer</h2>

<p><code>element.animate()</code> actually returns an AnimationPlayer object, which will become increasingly important as more of the Web Animations spec is launched. Both JavaScript- and CSS-created animations will have associated AnimationPlayers, allowing them to be seamlessly combined in useful and interesting ways.</p>

<p>For now, though, AnimationPlayer only has two pieces of functionality, both very useful. You can cancel an animation at any time by using <code>AnimationPlayer.cancel()</code>:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">player</span> <span class="o">=</span> <span class="nx">snowFlake</span><span class="p">.</span><span class="nx">animate</span><span class="p">([</span>
  <span class="p">{</span><span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translate(&#39;</span> <span class="o">+</span> <span class="nx">snowLeft</span> <span class="o">+</span> <span class="s1">&#39;px, -100%)&#39;</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translate(&#39;</span> <span class="o">+</span> <span class="nx">snowLeft</span> <span class="o">+</span> <span class="s1">&#39;px, &#39;</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span> <span class="o">+</span> <span class="s1">&#39;px)&#39;</span><span class="p">}</span>
<span class="p">],</span> <span class="mi">1500</span><span class="p">);</span>
<span class="c1">// less than 1500ms later...changed my mind</span>
<span class="nx">player</span><span class="p">.</span><span class="nx">cancel</span><span class="p">();</span></code></pre></div>

<p>And, to the relief of everyone who has attempted to build an animation system around CSS Animations or Transitions in the past, Web Animations always fire an event when they’re finished:</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">player</span> <span class="o">=</span> <span class="nx">snowFlake</span><span class="p">.</span><span class="nx">animate</span><span class="p">([</span>
  <span class="p">{</span><span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translate(&#39;</span> <span class="o">+</span> <span class="nx">snowLeft</span> <span class="o">+</span> <span class="s1">&#39;px, -100%)&#39;</span><span class="p">},</span>
  <span class="p">{</span><span class="nx">transform</span><span class="o">:</span> <span class="s1">&#39;translate(&#39;</span> <span class="o">+</span> <span class="nx">snowLeft</span> <span class="o">+</span> <span class="s1">&#39;px, &#39;</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span> <span class="o">+</span> <span class="s1">&#39;px)&#39;</span><span class="p">}</span>
<span class="p">],</span> <span class="mi">1500</span><span class="p">);</span>
<span class="nx">player</span><span class="p">.</span><span class="nx">onfinish</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;per aspera ad terra!&#39;</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>

<h2>Try it out</h2>

<p>This is all shipping in Chrome 36, moving to beta today! If you’d like to try it, try working with the native implementation in Chrome 36. However, there is a <a href="https://github.com/web-animations/web-animations-js">Web Animations polyfill</a>, which brings a significantly larger part of the full Web Animations specification to any of the modern, evergreen browsers.</p>

<p>A demo of the snow effect is available for you to try using both the <a href="http://jsbin.com/novuf/1/watch?js,output">native</a> version of <code>element.animate()</code> and the <a href="http://jsbin.com/rewev/2/watch?html,js,output">polyfill</a>.</p>

<h2>Let us know what you think</h2>

<p>Really, though, this is a preview of what’s to come, and is being released specifically to get developer feedback right away. We’re not sure yet if we’ve hit every use case, or sanded down every rough edge of the current APIs for animation. The only way for us to know and to really get this right is for developers to try it out and let us know what they think.</p>

<p>Comments on this post are of course valuable, and comments on the standard itself can be addressed to the CSS and SVG Working Groups via the <a href="http://lists.w3.org/Archives/Public/public-fx/">public-fx mailing list</a>.</p>

<p><strong>Update, October 2014</strong>: Chrome 39 adds support for <a href="https://www.chromestatus.com/feature/5633748733263872">several additional methods</a> related to controlling playback, such as <code>play()</code>, <code>pause()</code>, and <code>reverse()</code>. It also supports jumping to a specific point in an animation’s timeline via the <code>currentTime</code> property. You can see this functionality in action in <a href="http://web-animations.github.io/web-animations-demos/#playback-control">this new demo</a>.</p>

<p><em>Thanks to Addy Osmani and Max Heinritz for their assistance with this post.</em></p>

  </section>
  <section>
    <!-- TODO: Update link. -->
    
      <a href="/tag/element.animate" class="tag">element.animate</a>
    
      <a href="/tag/Web Animations" class="tag">Web Animations</a>
    
      <a href="/tag/animations" class="tag">animations</a>
    
  </section>
  <div class="pager">
    
    <a href="/2014/05/A-More-Compatible-Smoother-Touch">&laquo; A More Compatible, Smoother Touch</a>
     | 
    <a href="/2014/06/Automating-Web-Performance-Measurement">Automating Web Performance Measurement &raquo;</a>
    
  </div>
</div>
</article>
<section class="disqus pattern-bg-lighter">
  <div id="disqus" class="container">
    <h2>Comments</h2>
    <div id="disqus_thread">
      <a href="#disqus_thread" class="load-comments"
          data-disqus-identifier="http://updates.html5rocks.com/2014/05/Web-Animations---element-animate-is-now-in-Chrome-36">0</a>
    </div>
  </div>

  <noscript>
    <p class="center">
      <strong>
        <a href="http://disqus.com/?ref_noscript">Please enable JavaScript to view the comments powered by Disqus.</a>
      </strong>
    </p>
  </noscript>

  <script>

    var disqus_shortname = 'html5rocks';
    var disqus_identifier = 'http://updates.html5rocks.com/2014/05/Web-Animations---element-animate-is-now-in-Chrome-36';
    var disqus_url = 'http://updates.html5rocks.com/2014/05/Web-Animations---element-animate-is-now-in-Chrome-36';
    var disqus_developer = 0;

    var disqus_config = function () {
      var funky_language_code_mapping = {
        'de': 'de_inf',
        'es': 'es_ES',
        'pt': 'pt_EU',
        'sr': 'sr_CYRL',
        'sv': 'sv_SE',
        'zh': 'zh_HANT'
      };
      this.language = funky_language_code_mapping['en'] ||
                      'en';

      this.callbacks.onReady = [ function () {
                                    try {
                                      ga('send', 'event', 'View comments');
                                    } catch(err){}
                                 } ];
      this.callbacks.onNewComment = [ function (comment) {
                                        try {
                                          ga('send', 'event', 'Commented');
                                        } catch(err){}
                                      } ];
    };

    window.addEventListener('load', function(e) {

      var c = document.createElement('script');
      c.type = 'text/javascript';
      c.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      c.async = true;

      var s = document.getElementsByTagName('script')[0], sp = s.parentNode;
      sp.insertBefore(c, s);

      if (window.location.hash === '#disqus_thread')
        loadComments();

    }, false);

    var disqus_loaded = false;
    function loadComments() {

      if (disqus_loaded)
        return;

      disqus_loaded = true;

      ga('send', 'event', 'Interactions', 'Comments', 'Comments Loaded');

      var s = document.getElementsByTagName('script')[0], sp = s.parentNode;
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;

      var disqusContainer = document.getElementById('disqus');
      disqusContainer.classList.add('active');

      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      sp.insertBefore(dsq, s);
    }
    var loadCommentsButtons = document.querySelectorAll('.load-comments');
    for(var l = 0; l < loadCommentsButtons.length; l++)
      loadCommentsButtons[l].addEventListener('click', loadComments);

  </script>
</section>



    </div>
    <footer>
  <div class="container">
    
    <h1>Next steps</h1>
    <aside class="panel share">
      <h2>Share</h2>
        <a href="https://twitter.com/share?url=http://www.html5rocks.com/tutorials/shapes/getting-started/&amp;text=Getting Started with CSS Shapes&amp;lang=en&amp;via=ChromiumDev&amp;related=ChromiumDev" class="twitter" target="_blank">Twitter</a>
        <a href="https://www.facebook.com/sharer/sharer.php?u=http://www.html5rocks.com/tutorials/shapes/getting-started/" class="facebook" target="_blank">Facebook</a>
        <a href="https://plus.google.com/share?url=http://www.html5rocks.com/tutorials/shapes/getting-started/" class="gplus" onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">Google+</a>
    </aside>
    <aside class="panel rss">
      <h2>Subscribe</h2>
      <p>Enjoyed this article? Grab the <a href="http://feeds.feedburner.com/html5rocks">RSS feed</a> and stay up-to-date.</p>
    </aside>
    
    <p class="licensing">
      Except as otherwise <a href="http://code.google.com/policies.html#restrictions">noted</a>, the content of this page is licensed under the <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License</a>, and code samples are licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>.
    </p>
  </div>
</footer>


    <script>
      (function() {

        var siteHeader = document.getElementById('siteheader');
        var navToggle = document.getElementById('navtoggle');
        var siteNav = document.getElementById('sitenav');

        navToggle.addEventListener('click', function(e) {
          siteNav.classList.toggle('active');
          e.preventDefault();
        });

      })();
    </script>

    <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create','UA-15028909-7','auto');
      ga('create','UA-49880327-4','auto',{'name':'html5rocks'});
      ga('send','pageview');
      ga('html5rocks.send','pageview');
    </script>
  </body>
</html>
